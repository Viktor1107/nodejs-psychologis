{
  "openapi": "3.1.0",
  "info": {
    "title": "Psychologist App API",
    "version": "1.0.0",
    "description": "This is the official API documentation for the Psychologist application. It contains detailed information about all endpoints, including authentication, psychologists, and favorites management. Use this documentation to understand request and response structures, query parameters, and data schemas.",
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Local development server for testing API endpoints on your machine."
    },
    {
      "url": "https://psychologist-app.vercel.app",
      "description": "Production server accessible globally for real user interactions and live testing."
    }
  ],
  "tags": [
    {
      "name": "Psychologist",
      "description": "Operations related to psychologists, including creation, retrieval, update, and deletion."
    },
    {
      "name": "Auth",
      "description": "Authentication and user management, including registration, login, logout, password reset, and avatar management."
    },
    {
      "name": "Favorite",
      "description": "Management of user's favorite psychologists, including listing, adding, and removing favorites."
    }
  ],
  "paths": {
    "/psychologists": {
      "get": {
        "tags": ["Psychologist"],
        "summary": "Retrieve a paginated list of all psychologists",
        "description": "Returns a list of psychologists with optional pagination parameters. Each psychologist includes details such as name, avatar URL, experience, price per hour, specialization, and reviews.",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination (default is 1).",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of psychologists per page (default is 10, maximum is 50).",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of psychologists retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Psychologist"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": ["Psychologist"],
        "summary": "Create a new psychologist",
        "description": "Adds a new psychologist to the system. All required fields must be provided.",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Psychologist"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Psychologist created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Psychologist"
                }
              }
            }
          },
          "400": {
            "description": "Validation error due to missing or invalid fields"
          }
        }
      }
    },
    "/psychologists/{id}": {
      "get": {
        "tags": ["Psychologist"],
        "summary": "Retrieve a psychologist by ID",
        "description": "Returns detailed information for a single psychologist, including reviews.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the psychologist (MongoDB ObjectId)",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Psychologist retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Psychologist"
                }
              }
            }
          },
          "404": {
            "description": "Psychologist not found"
          }
        }
      },
      "patch": {
        "tags": ["Psychologist"],
        "summary": "Update an existing psychologist",
        "description": "Partially updates fields for a psychologist by ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the psychologist",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Psychologist"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Psychologist updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Psychologist"
                }
              }
            }
          },
          "400": {
            "description": "Invalid data provided"
          },
          "404": {
            "description": "Psychologist not found"
          }
        }
      },
      "delete": {
        "tags": ["Psychologist"],
        "summary": "Delete a psychologist by ID",
        "description": "Removes a psychologist from the system permanently.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the psychologist",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Psychologist deleted successfully"
          },
          "404": {
            "description": "Psychologist not found"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "Register a new user",
        "description": "Creates a new user account with name, email, and password.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/register"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "409": {
            "description": "Email already in use"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login a user",
        "description": "Authenticates a user using email and password and returns session information.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/loginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User logged in successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string"
                    },
                    "refreshToken": {
                      "type": "string"
                    },
                    "user": {
                      "$ref": "#/components/schemas/UserResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized â€” invalid credentials"
          }
        }
      }
    },
    "/favorites": {
      "get": {
        "tags": ["Favorite"],
        "summary": "Get a list of user's favorite psychologists",
        "description": "Returns all psychologists that the user has marked as favorite.",
        "responses": {
          "200": {
            "description": "Favorites retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FavoriteItem"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Favorite"],
        "summary": "Add a psychologist to favorites",
        "description": "Adds a psychologist to the user's favorites list.",
        "parameters": [
          {
            "name": "psychologistId",
            "in": "path",
            "required": true,
            "description": "ID of the psychologist to add to favorites",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Psychologist added to favorites successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteItem"
                }
              }
            }
          },
          "404": {
            "description": "Psychologist not found"
          }
        }
      },
      "delete": {
        "tags": ["Favorite"],
        "summary": "Remove a psychologist from favorites",
        "description": "Removes a psychologist from the user's favorites list.",
        "parameters": [
          {
            "name": "psychologistId",
            "in": "path",
            "required": true,
            "description": "ID of the psychologist to remove from favorites",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Psychologist removed from favorites successfully"
          },
          "404": {
            "description": "Psychologist not found"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Psychologist": {
        "type": "object",
        "required": [
          "name",
          "avatar_url",
          "experience",
          "price_per_hour",
          "license",
          "specialization",
          "about"
        ],
        "properties": {
          "_id": {
            "type": "string",
            "description": "Auto-generated ID of the psychologist",
            "example": "507f1f77bcf86cd799439011",
            "readOnly": true
          },
          "name": {
            "type": "string",
            "description": "Full name of the psychologist",
            "example": "Iryna Sydorenko"
          },
          "avatar_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to the psychologist's avatar image",
            "example": "https://res.cloudinary.com/demo/image/upload/psychologist1.jpg"
          },
          "experience": {
            "type": "string",
            "description": "Total years of experience",
            "example": "8 years"
          },
          "price_per_hour": {
            "type": "number",
            "description": "Consultation price per hour in the local currency",
            "example": 1200
          },
          "rating": {
            "type": "number",
            "description": "Average rating based on user reviews",
            "example": 4.7
          },
          "license": {
            "type": "string",
            "description": "Official license number or title",
            "example": "LP-2021-5678"
          },
          "specialization": {
            "type": "string",
            "description": "Areas of psychological specialization",
            "example": "Cognitive Behavioral Therapy, Child Psychology"
          },
          "initial_consultation": {
            "type": "string",
            "description": "Information about the initial consultation, e.g., free 30-minute session",
            "example": "30 minutes free via video call"
          },
          "about": {
            "type": "string",
            "description": "Detailed biography of the psychologist including education and professional approach",
            "example": "Practicing psychologist since 2015. Specializing in anxiety disorders, trauma, and family therapy."
          },
          "reviews": {
            "type": "array",
            "description": "List of user reviews",
            "items": {
              "$ref": "#/components/schemas/Review"
            }
          },
          "adminId": {
            "type": "string",
            "description": "ID of the admin who added the psychologist",
            "example": "507f191e810c19729de860ea"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the psychologist record was created",
            "example": "2025-04-01T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the last update",
            "example": "2025-04-05T14:20:00.000Z"
          }
        }
      },
      "Review": {
        "type": "object",
        "required": ["reviewer", "rating"],
        "properties": {
          "reviewer": {
            "type": "string",
            "description": "Name of the reviewer",
            "example": "Elena K."
          },
          "rating": {
            "type": "number",
            "minimum": 0,
            "maximum": 5,
            "description": "Rating value between 0 and 5",
            "example": 4.5
          },
          "comment": {
            "type": "string",
            "nullable": true,
            "description": "Optional comment provided by the reviewer",
            "example": "Helped a lot with anxiety, highly recommend!"
          }
        }
      },
      "UserResponse": {
        "type": "object",
        "required": ["_id", "name", "email"],
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique user ID",
            "example": "65e0c0f5e86b1b2d7f1a6b21"
          },
          "name": {
            "type": "string",
            "description": "Full name of the user",
            "example": "Viktor Tryukhan"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address of the user",
            "example": "viktortryukhan11@gmail.com"
          },
          "avatar_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "Optional avatar URL of the user",
            "example": "https://res.cloudinary.com/demo/image/upload/avatar1.jpg"
          }
        }
      },
      "FavoriteItem": {
        "type": "object",
        "properties": {
          "psychologistId": {
            "type": "string",
            "description": "ID of the favorite psychologist",
            "example": "507f1f77bcf86cd799439011"
          },
          "psychologist": {
            "$ref": "#/components/schemas/Psychologist"
          }
        }
      },
      "register": {
        "type": "object",
        "required": ["email", "password", "name"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "minLength": 6,
            "example": "MyPass123!"
          },
          "name": {
            "type": "string",
            "example": "John Doe"
          }
        }
      },
      "loginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "12345678"
          }
        }
      }
    }
  }
}
